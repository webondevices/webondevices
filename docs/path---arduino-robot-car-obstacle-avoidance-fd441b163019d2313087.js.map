{"version":3,"sources":["webpack:///path---arduino-robot-car-obstacle-avoidance-fd441b163019d2313087.js","webpack:///./.cache/json/arduino-robot-car-obstacle-avoidance.json"],"names":["webpackJsonp","415","module","exports","data","markdownRemark","html","timeToRead","excerpt","frontmatter","title","cover","date","category","tags","fields","slug","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAAi41DC,WAAA,EAAAC,QAAA,8IAAAC,aAAuiBC,MAAA,uCAAAC,MAAA,yDAAAC,KAAA,aAAAC,SAAA,OAAAC,MAAA,2BAAwLC,QAAWC,KAAA,2CAAiDC,aAAgBD,KAAA","file":"path---arduino-robot-car-obstacle-avoidance-fd441b163019d2313087.js","sourcesContent":["webpackJsonp([188721424714378],{\n\n/***/ 415:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p><strong>Arduino Robot Car with Obstacle Avoidance. I’ve always been excited about autonomous cars and radio controlled toy cars so it was time for me to build my own with an Arduino Nano. The finished car has two modes. First is manual mode which allows you to drive it wirelessly from an Arduino UNO and a joystick shield. Second is the autonomous mode which drives the car continuously forward and avoids obstacles by stopping and steering away immediately. Obstacles are detected by the ultrasonic sensor attached to the front of the car.</strong></p>\\n<p><a class=\\\"youtube-video\\\" href=\\\"https://www.youtube.com/embed/bVsun0N3GPg\\\" target=\\\"_blank\\\">Click to see Youtube video</a></p>\\n<h3 id=\\\"lets-now-see-how-i-built-this-car\\\"><a href=\\\"#lets-now-see-how-i-built-this-car\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Let’s now see how I built this car.</h3>\\n<p>I didn’t want to spend too much time building the chassis so I decided to buy a <strong>robot car kit</strong> <a href=\\\"http://www.ebay.com/itm/Smart-Motor-Robot-Car-Battery-Box-Chassis-Kit-Speed-Encoder-for-Arduino-New-/351155613989\\\">from ebay</a>. After assembling the kit I soldered the wires onto the motors and screwed the 4xAA battery holder then I was ready to add the Arduino electronics.</p>\\n<h3 id=\\\"motor-drive-circuit\\\"><a href=\\\"#motor-drive-circuit\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Motor drive circuit</h3>\\n<p>Driving the motors from the Arduino is not possible as they draw too much current so you need a separate motor drive unit to help the Arduino. I purchased a pretty, red L298N module from ebay. Here’s how it looks like:</p>\\n<p><img src=\\\"http://localhost:8000/posts/l298n-pinout.jpg\\\" alt=\\\"l298n-pinout\\\"></p>\\n<p>This module can drive two motors up to <strong>2000mA each</strong> and maximum <strong>50 volts</strong>. That’s perfectly fine as our motors will only be driven from the 4xAA batteries which is 6 volts in total. The two motors are connected to port 1 and port 2 (see numbers on the image). Wires can be interchanged as reversed polarity only makes the motors go in reverse.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-front.jpg\\\" alt=\\\"Arduino Robot Car with Obstacle Avoidance\\\"></p>\\n<p>Behind pin 3 and 4 there is a jumper. If this jumper is in place then you have to make sure your <strong>supply voltage is lower than 12V</strong>. It will also allow you to use pin 5 as <strong>regulated 5V output for your Arduino</strong>. On my car I connected the positive wire from the battery pack to pin 3 and the ground wire to number 4. Next I connected the 5V output pin from the motor drive module, which is pin number 5, to my Arduino Nano’s 5V pin and I also connected pin number 4 to my Arduino’s GND. Power is now connected.</p>\\n<p>The 6 pins marked with number 6 are there to take motor control commands from the Arduino, 3 for each motor. Here’s how it works:</p>\\n<ul>\\n<li>\\n<p><strong>ENA and ENB are the enable pins for the two motors</strong>. If the jumper is in place the motors will be driven at full speed. If we take off the jumpers and connect a PWM signal from the Arduino to them then we can change the speed of the motors.</p>\\n</li>\\n<li>\\n<p><strong>IN1 and IN2 can change the direction of motor number 1</strong>. If we send HIGH to IN1 and LOW to IN2 then the motor will go forward, if IN1 is LOW and IN2 is HIGH then the motor will go backwards. The same applies to the second motor and the IN3 and IN4 pins.</p>\\n</li>\\n<li>\\n<p>If I want to run the first motor at half speed forward then ENA is a PWM value of 128, IN1 is HIGH and IN2 is LOW</p>\\n</li>\\n<li>\\n<p>If I want to run the second motor at full speed backwards then ENB is a PWM value of 255, IN3 is LOW and IN4 is HIGH</p>\\n</li>\\n</ul>\\n<p>I added a 1000uF to pin 4 and 5 as the motors draw a lot of current when speeding up and the Arduino restarted quite often when there was a voltage drop. This fixed the problem and now the the motor drive circuit done.</p>\\n<p>The hardware build was so easy that my 4-year-old daughter managed to understand the circuit and what each of the components do.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-hero.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<h3 id=\\\"autonomous-mode-and-the-ultrasonic-sensor\\\"><a href=\\\"#autonomous-mode-and-the-ultrasonic-sensor\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Autonomous mode and the ultrasonic sensor</h3>\\n<p>I used a cheap ultrasonic distance sensor with a 4 meter range. That’s perfectly enough as I set the obstacle detection limit to only 20 centimetres. The sensor has 4 pins: VCC is connected to the Arduino’s 5V pin, GND to GND, Trig to D6 and Echo to D5.</p>\\n<p>The example code to read the sensor is only a few lines:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> trigPin 6</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> echoPin 5</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span>begin <span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> INPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">>=</span> <span class=\\\"token number\\\">400</span> <span class=\\\"token operator\\\">||</span> distance <span class=\\\"token operator\\\">&lt;=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Out of range\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">print</span><span class=\\\"token punctuation\\\">(</span>distance<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\" cm\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>After I had all the motors and the distance sensor connected up I put the motors into a continues forward motion for the autonomous mode. In the meantime the car was constantly checking the distance sensor and instructed the motors to steer away until there was no longer anything in front. Here's what I did in the loop() function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token comment\\\">// Get Distance sensor</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Added this line</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">20</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">delay</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">100</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h3 id=\\\"manual-mode-and-the-joystick-shield\\\"><a href=\\\"#manual-mode-and-the-joystick-shield\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Manual mode and the joystick shield</h3>\\n<p>This was a little bit more complicated as we now have wireless communication. The controller was an <strong>Arduino UNO with a joystick shield</strong>. You can also see the <strong>nRF24l01 antenna</strong> on the left top corner.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-joystick.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<p>This controller was powered from a 9V battery. The button and the joystick on the shield are simple sensors so you can read them with the digitalRead() and analogRead() functions. The below piece of code is the final code I have for the joystick. It first checks the state of the joystick then sends through the wireless messages through the nRF24l01 module.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;SPI.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24_config.h></span></span>\\n\\n<span class=\\\"token comment\\\">// Radio pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> cePin 9</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> csnPin 10</span>\\n\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> joyX A0</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> joyY A1</span>\\n\\n<span class=\\\"token comment\\\">// Init RF24 radio</span>\\nRF24 <span class=\\\"token function\\\">radio</span><span class=\\\"token punctuation\\\">(</span>cePin<span class=\\\"token punctuation\\\">,</span> csnPin<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> uint64_t pipe0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0xF0F0F0AA</span><span class=\\\"token punctuation\\\">;</span>\\nuint8_t p0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// Variables</span>\\n<span class=\\\"token keyword\\\">int</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> terminateChar<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\nString dataToSend <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">openWritingPipe</span><span class=\\\"token punctuation\\\">(</span>pipe0<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    dataToSend <span class=\\\"token operator\\\">+</span><span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">analogRead</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1023</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    dataToSend <span class=\\\"token operator\\\">+</span><span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">analogRead</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1023</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">int</span> stringSize <span class=\\\"token operator\\\">=</span> dataToSend<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">length</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">for</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">int</span> i <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span> i <span class=\\\"token operator\\\">&lt;</span> stringSize<span class=\\\"token punctuation\\\">;</span> i<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">int</span> charToSend<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n      charToSend<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> dataToSend<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">charAt</span><span class=\\\"token punctuation\\\">(</span>i<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>charToSend<span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    terminateChar<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n    radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>terminateChar<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    dataToSend <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-hero-back.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<p>To read this from the car you open a reading pipe then check the radio.available() function for incoming messages. Below is the final piece of code that is running on the car:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;SPI.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24_config.h></span></span>\\n\\n<span class=\\\"token comment\\\">// Radio pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> cePin 9</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> csnPin 10</span>\\n\\n<span class=\\\"token comment\\\">// US sensor pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> trigPin 14</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> echoPin 2</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> accuracy 4</span>\\n\\n<span class=\\\"token comment\\\">// Motor pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> enableLeft 6</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> leftForward 4</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> leftBackward 3</span>\\n\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> enableRight 5</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> rightForward 8</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> rightBackward 7</span>\\n\\n<span class=\\\"token comment\\\">// Init RF24 radio</span>\\nRF24 <span class=\\\"token function\\\">radio</span><span class=\\\"token punctuation\\\">(</span>cePin<span class=\\\"token punctuation\\\">,</span> csnPin<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> uint64_t pipe0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0xF0F0F0AA</span><span class=\\\"token punctuation\\\">;</span>\\nuint8_t p0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// Variables</span>\\nString receivedMessage <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> joyX <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> joyY <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> left <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> right <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// Setup RF24 radio</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">openReadingPipe</span><span class=\\\"token punctuation\\\">(</span>p0<span class=\\\"token punctuation\\\">,</span> pipe0<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">startListening</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup US sensor</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> INPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup LEFT whel</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup RIGHT wheel</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// Get Distance sensor</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Added this line</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Watch control messages</span>\\n  <span class=\\\"token keyword\\\">while</span><span class=\\\"token punctuation\\\">(</span>radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">available</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n    radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">read</span><span class=\\\"token punctuation\\\">(</span>chr<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">char</span> receivedChar <span class=\\\"token operator\\\">=</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">!=</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n      receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">concat</span><span class=\\\"token punctuation\\\">(</span>receivedChar<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n      joyX <span class=\\\"token operator\\\">=</span> receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">substring</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toInt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      joyY <span class=\\\"token operator\\\">=</span> receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">substring</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toInt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">15</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        joyX <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n        joyY <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Backward</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Forward</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n\\n      right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n      right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n\\n      right <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>right <span class=\\\"token operator\\\">+</span> speedCoeff<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n      left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n\\n      left <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>left <span class=\\\"token operator\\\">+</span> speedCoeff<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">==</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Stopped</span>\\n        <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Left</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Right</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">==</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Stopped</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n      receivedMessage <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>I also got the <strong>bluetooth communication</strong> working between my phone and the Arduino but only with an Arduino UNO. It’s probably because the Arduino Nano I was using in this project requires a 3.3V signal level on RX and TX and the UNO can take 5V. If you have done this before please email me and let me know!</p>\",\"timeToRead\":8,\"excerpt\":\"Arduino Robot Car with Obstacle Avoidance. I’ve always been excited about autonomous cars and radio controlled toy cars so it was time for…\",\"frontmatter\":{\"title\":\"Arduino Robot Car Obstacle Avoidance\",\"cover\":\"http://localhost:8000/posts/arduino-robot-car-hero.jpg\",\"date\":\"07/12/2015\",\"category\":\"moar\",\"tags\":[\"arduino\",\"project idea\"]},\"fields\":{\"slug\":\"/arduino-robot-car-obstacle-avoidance\"}}},\"pathContext\":{\"slug\":\"/arduino-robot-car-obstacle-avoidance\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---arduino-robot-car-obstacle-avoidance-fd441b163019d2313087.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p><strong>Arduino Robot Car with Obstacle Avoidance. I’ve always been excited about autonomous cars and radio controlled toy cars so it was time for me to build my own with an Arduino Nano. The finished car has two modes. First is manual mode which allows you to drive it wirelessly from an Arduino UNO and a joystick shield. Second is the autonomous mode which drives the car continuously forward and avoids obstacles by stopping and steering away immediately. Obstacles are detected by the ultrasonic sensor attached to the front of the car.</strong></p>\\n<p><a class=\\\"youtube-video\\\" href=\\\"https://www.youtube.com/embed/bVsun0N3GPg\\\" target=\\\"_blank\\\">Click to see Youtube video</a></p>\\n<h3 id=\\\"lets-now-see-how-i-built-this-car\\\"><a href=\\\"#lets-now-see-how-i-built-this-car\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Let’s now see how I built this car.</h3>\\n<p>I didn’t want to spend too much time building the chassis so I decided to buy a <strong>robot car kit</strong> <a href=\\\"http://www.ebay.com/itm/Smart-Motor-Robot-Car-Battery-Box-Chassis-Kit-Speed-Encoder-for-Arduino-New-/351155613989\\\">from ebay</a>. After assembling the kit I soldered the wires onto the motors and screwed the 4xAA battery holder then I was ready to add the Arduino electronics.</p>\\n<h3 id=\\\"motor-drive-circuit\\\"><a href=\\\"#motor-drive-circuit\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Motor drive circuit</h3>\\n<p>Driving the motors from the Arduino is not possible as they draw too much current so you need a separate motor drive unit to help the Arduino. I purchased a pretty, red L298N module from ebay. Here’s how it looks like:</p>\\n<p><img src=\\\"http://localhost:8000/posts/l298n-pinout.jpg\\\" alt=\\\"l298n-pinout\\\"></p>\\n<p>This module can drive two motors up to <strong>2000mA each</strong> and maximum <strong>50 volts</strong>. That’s perfectly fine as our motors will only be driven from the 4xAA batteries which is 6 volts in total. The two motors are connected to port 1 and port 2 (see numbers on the image). Wires can be interchanged as reversed polarity only makes the motors go in reverse.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-front.jpg\\\" alt=\\\"Arduino Robot Car with Obstacle Avoidance\\\"></p>\\n<p>Behind pin 3 and 4 there is a jumper. If this jumper is in place then you have to make sure your <strong>supply voltage is lower than 12V</strong>. It will also allow you to use pin 5 as <strong>regulated 5V output for your Arduino</strong>. On my car I connected the positive wire from the battery pack to pin 3 and the ground wire to number 4. Next I connected the 5V output pin from the motor drive module, which is pin number 5, to my Arduino Nano’s 5V pin and I also connected pin number 4 to my Arduino’s GND. Power is now connected.</p>\\n<p>The 6 pins marked with number 6 are there to take motor control commands from the Arduino, 3 for each motor. Here’s how it works:</p>\\n<ul>\\n<li>\\n<p><strong>ENA and ENB are the enable pins for the two motors</strong>. If the jumper is in place the motors will be driven at full speed. If we take off the jumpers and connect a PWM signal from the Arduino to them then we can change the speed of the motors.</p>\\n</li>\\n<li>\\n<p><strong>IN1 and IN2 can change the direction of motor number 1</strong>. If we send HIGH to IN1 and LOW to IN2 then the motor will go forward, if IN1 is LOW and IN2 is HIGH then the motor will go backwards. The same applies to the second motor and the IN3 and IN4 pins.</p>\\n</li>\\n<li>\\n<p>If I want to run the first motor at half speed forward then ENA is a PWM value of 128, IN1 is HIGH and IN2 is LOW</p>\\n</li>\\n<li>\\n<p>If I want to run the second motor at full speed backwards then ENB is a PWM value of 255, IN3 is LOW and IN4 is HIGH</p>\\n</li>\\n</ul>\\n<p>I added a 1000uF to pin 4 and 5 as the motors draw a lot of current when speeding up and the Arduino restarted quite often when there was a voltage drop. This fixed the problem and now the the motor drive circuit done.</p>\\n<p>The hardware build was so easy that my 4-year-old daughter managed to understand the circuit and what each of the components do.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-hero.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<h3 id=\\\"autonomous-mode-and-the-ultrasonic-sensor\\\"><a href=\\\"#autonomous-mode-and-the-ultrasonic-sensor\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Autonomous mode and the ultrasonic sensor</h3>\\n<p>I used a cheap ultrasonic distance sensor with a 4 meter range. That’s perfectly enough as I set the obstacle detection limit to only 20 centimetres. The sensor has 4 pins: VCC is connected to the Arduino’s 5V pin, GND to GND, Trig to D6 and Echo to D5.</p>\\n<p>The example code to read the sensor is only a few lines:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> trigPin 6</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> echoPin 5</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span>begin <span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> INPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">>=</span> <span class=\\\"token number\\\">400</span> <span class=\\\"token operator\\\">||</span> distance <span class=\\\"token operator\\\">&lt;=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"Out of range\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">print</span><span class=\\\"token punctuation\\\">(</span>distance<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">println</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\" cm\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>After I had all the motors and the distance sensor connected up I put the motors into a continues forward motion for the autonomous mode. In the meantime the car was constantly checking the distance sensor and instructed the motors to steer away until there was no longer anything in front. Here's what I did in the loop() function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token comment\\\">// Get Distance sensor</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Added this line</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">20</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">200</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">delay</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">100</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<h3 id=\\\"manual-mode-and-the-joystick-shield\\\"><a href=\\\"#manual-mode-and-the-joystick-shield\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Manual mode and the joystick shield</h3>\\n<p>This was a little bit more complicated as we now have wireless communication. The controller was an <strong>Arduino UNO with a joystick shield</strong>. You can also see the <strong>nRF24l01 antenna</strong> on the left top corner.</p>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-joystick.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<p>This controller was powered from a 9V battery. The button and the joystick on the shield are simple sensors so you can read them with the digitalRead() and analogRead() functions. The below piece of code is the final code I have for the joystick. It first checks the state of the joystick then sends through the wireless messages through the nRF24l01 module.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;SPI.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24_config.h></span></span>\\n\\n<span class=\\\"token comment\\\">// Radio pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> cePin 9</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> csnPin 10</span>\\n\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> joyX A0</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> joyY A1</span>\\n\\n<span class=\\\"token comment\\\">// Init RF24 radio</span>\\nRF24 <span class=\\\"token function\\\">radio</span><span class=\\\"token punctuation\\\">(</span>cePin<span class=\\\"token punctuation\\\">,</span> csnPin<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> uint64_t pipe0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0xF0F0F0AA</span><span class=\\\"token punctuation\\\">;</span>\\nuint8_t p0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// Variables</span>\\n<span class=\\\"token keyword\\\">int</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> terminateChar<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\nString dataToSend <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">openWritingPipe</span><span class=\\\"token punctuation\\\">(</span>pipe0<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    dataToSend <span class=\\\"token operator\\\">+</span><span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">analogRead</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1023</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    dataToSend <span class=\\\"token operator\\\">+</span><span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">analogRead</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1023</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">int</span> stringSize <span class=\\\"token operator\\\">=</span> dataToSend<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">length</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">for</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">int</span> i <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span> i <span class=\\\"token operator\\\">&lt;</span> stringSize<span class=\\\"token punctuation\\\">;</span> i<span class=\\\"token operator\\\">++</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">int</span> charToSend<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n      charToSend<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> dataToSend<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">charAt</span><span class=\\\"token punctuation\\\">(</span>i<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>charToSend<span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    terminateChar<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n    radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">write</span><span class=\\\"token punctuation\\\">(</span>terminateChar<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    dataToSend <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p><img src=\\\"http://localhost:8000/posts/arduino-robot-car-hero-back.jpg\\\" alt=\\\"Arduino Robot Car building with children\\\"></p>\\n<p>To read this from the car you open a reading pipe then check the radio.available() function for incoming messages. Below is the final piece of code that is running on the car:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-c\\\"><code><span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;SPI.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24.h></span></span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">include</span> <span class=\\\"token string\\\">&lt;RF24_config.h></span></span>\\n\\n<span class=\\\"token comment\\\">// Radio pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> cePin 9</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> csnPin 10</span>\\n\\n<span class=\\\"token comment\\\">// US sensor pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> trigPin 14</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> echoPin 2</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> accuracy 4</span>\\n\\n<span class=\\\"token comment\\\">// Motor pin setup</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> enableLeft 6</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> leftForward 4</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> leftBackward 3</span>\\n\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> enableRight 5</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> rightForward 8</span>\\n<span class=\\\"token macro property\\\">#<span class=\\\"token directive keyword\\\">define</span> rightBackward 7</span>\\n\\n<span class=\\\"token comment\\\">// Init RF24 radio</span>\\nRF24 <span class=\\\"token function\\\">radio</span><span class=\\\"token punctuation\\\">(</span>cePin<span class=\\\"token punctuation\\\">,</span> csnPin<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> uint64_t pipe0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0xF0F0F0AA</span><span class=\\\"token punctuation\\\">;</span>\\nuint8_t p0 <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// Variables</span>\\nString receivedMessage <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> joyX <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> joyY <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> left <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">int</span> right <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">setup</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// Setup RF24 radio</span>\\n  Serial<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">9600</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">begin</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">openReadingPipe</span><span class=\\\"token punctuation\\\">(</span>p0<span class=\\\"token punctuation\\\">,</span> pipe0<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">startListening</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup US sensor</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> INPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup LEFT whel</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Setup RIGHT wheel</span>\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token function\\\">pinMode</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> OUTPUT<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">void</span> <span class=\\\"token function\\\">loop</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// Get Distance sensor</span>\\n  <span class=\\\"token keyword\\\">float</span> duration<span class=\\\"token punctuation\\\">,</span> distance<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token function\\\">delayMicroseconds</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Added this line</span>\\n  <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>trigPin<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  duration <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">pulseIn</span><span class=\\\"token punctuation\\\">(</span>echoPin<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  distance <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>duration <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">29.1</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// Watch control messages</span>\\n  <span class=\\\"token keyword\\\">while</span><span class=\\\"token punctuation\\\">(</span>radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">available</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n    radio<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">read</span><span class=\\\"token punctuation\\\">(</span>chr<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">char</span> receivedChar <span class=\\\"token operator\\\">=</span> chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>chr<span class=\\\"token punctuation\\\">[</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">!=</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n      receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">concat</span><span class=\\\"token punctuation\\\">(</span>receivedChar<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n      joyX <span class=\\\"token operator\\\">=</span> receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">substring</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toInt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      joyY <span class=\\\"token operator\\\">=</span> receivedMessage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">substring</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toInt</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>distance <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">15</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        joyX <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n        joyY <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Backward</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Forward</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyY<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n        speedCoeff <span class=\\\"token operator\\\">=</span> speedCoeff <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> speedCoeff<span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n\\n      right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n      right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n\\n      right <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>right <span class=\\\"token operator\\\">+</span> speedCoeff<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n      left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n\\n      left <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>left <span class=\\\"token operator\\\">+</span> speedCoeff<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n      <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyY <span class=\\\"token operator\\\">==</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// Stopped</span>\\n        <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Left</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span><span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Right</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> HIGH<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          right <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          right <span class=\\\"token operator\\\">=</span> right <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> right<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> right<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n          left <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span>joyX<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">9</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">255</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">&lt;</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">0</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          left <span class=\\\"token operator\\\">=</span> left <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">255</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">255</span> <span class=\\\"token punctuation\\\">:</span> left<span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> left<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n        <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>joyX <span class=\\\"token operator\\\">==</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token comment\\\">// Stopped</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>rightForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftBackward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">digitalWrite</span><span class=\\\"token punctuation\\\">(</span>leftForward<span class=\\\"token punctuation\\\">,</span> LOW<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableRight<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token function\\\">analogWrite</span><span class=\\\"token punctuation\\\">(</span>enableLeft<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n      receivedMessage <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>I also got the <strong>bluetooth communication</strong> working between my phone and the Arduino but only with an Arduino UNO. It’s probably because the Arduino Nano I was using in this project requires a 3.3V signal level on RX and TX and the UNO can take 5V. If you have done this before please email me and let me know!</p>\",\"timeToRead\":8,\"excerpt\":\"Arduino Robot Car with Obstacle Avoidance. I’ve always been excited about autonomous cars and radio controlled toy cars so it was time for…\",\"frontmatter\":{\"title\":\"Arduino Robot Car Obstacle Avoidance\",\"cover\":\"http://localhost:8000/posts/arduino-robot-car-hero.jpg\",\"date\":\"07/12/2015\",\"category\":\"moar\",\"tags\":[\"arduino\",\"project idea\"]},\"fields\":{\"slug\":\"/arduino-robot-car-obstacle-avoidance\"}}},\"pathContext\":{\"slug\":\"/arduino-robot-car-obstacle-avoidance\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/arduino-robot-car-obstacle-avoidance.json\n// module id = 415\n// module chunks = 188721424714378"],"sourceRoot":""}